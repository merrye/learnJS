<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<script src="../js/vue.js"></script>
	<script src="https://unpkg.com/axios@0.12.0/dist/axios.min.js"></script>
	<script src="https://unpkg.com/lodash@4.13.1/lodash.min.js"></script>
</head>
<body>
	<!-- <div id="example">
		<p>Original message: "{{ message }}"</p>
		<p>Computed reversed message: "{{ reversedMessage }}"</p>
	</div> -->

	<!-- <div id="demo">{{ fullName }}</div> -->

	<div id="watch-example">
		<p>
			Ask a yes/no question:
			<input v-model="question">
		</p>
		<p>{{ answer }}</p>
	</div>
	<script>
		// 计算属性
			// 基础例子
			// var vm = new Vue({
			// 	el: '#example',
			// 	data: {
			// 		message: 'Hello'
			// 	},
			// 	computed: {
			// 		reversedMessage: function(){
			// 			return this.message.split('').reverse().join('')
			// 		}
			// 	}
			// });

			// 计算缓存 vs Methods

			// 计算属性 vs Watched Property
			// var vm = new Vue({
			// 	el: '#demo',
			// 	data:{
			// 		firstName: 'Foo',
			// 		lastName: 'Bar'
			// 	},
			// 	// watch: {
			// 	// 	firstName: function(val){
			// 	// 		this.fullName = val + ' ' + this.lastName
			// 	// 	},
			// 	// 	lastaName: function(val){
			// 	// 		this.fullName = this.firstName + ' ' + val
			// 	// 	}
			// 	// }
			// 	computed: {
			// 		fullName: function(){
			// 			return this.firstName + ' ' + this.lastName
			// 		}
			// 	}
			// });

			// 计算 setter
			
		// 观察 Watchers
			var watchExampleVM = new Vue({
				el: '#watch-example',
				data: {
					question: '',
					answer: 'I cannot give you an answer until you ask a question!'
				},
				watch: {
					question: function(newQuestion){
						this.answer = 'Waiting for you to  stop typing...'
						this.getAnswer()
					}
				},
				methods: {
					getAnswer: _.debounce(
						function(){
							var vm = this
							if(this.question.indexOf('?') === -1){
								vm.answer = 'Questions usually contain a question mark. ;-)'
								return
							}
							vm.answer = 'Thingking...'
							axios.get('https://yesno.wtf/api')
						  	.then(function(response){
						  		vm.answer = _.capitalize(response.data.answer)
						  	})
						  	.catch(function(error){
						  		vm.answer = 'Error! Could not reach the API. ' + error
						  	})
						},
						500
					)
				}
			});
	</script>
</body>
</html>