<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
<body>
	<div style="width: 100px;height: 100px;background: red;"></div>
	<div style="width: 100px;height: 100px;background: blue;"></div>
	<div style="width: 100px;height: 100px;background: green;"></div>
	<script>
		let oDiv = document.getElementsByTagName('div');

		let fn = function(i,left){
			return new Promise((resolve,reject)=>{
				let speed = 10;
				// function init(){
				// 	if(speed <= left){
				// 		setTimeout(()=>{
				// 			oDiv[i].style.marginLeft = `${speed}px`;
				// 			speed += 10;
				// 			init();
				// 		},100);
				// 	}else{
				// 		resolve();
				// 	};
				// };
				// init();
				let timer = setInterval(function(){
					if(speed <= left){
						oDiv[i].style.marginLeft = `${speed}px`;
						speed += 10;
					}else{
						clearInterval(timer);
						resolve();
					};
				},100);
			});
		};
		// fn(0,300).then(()=>fn(1,400)).then(()=>fn(2,500));

		// Promise.all()
		// 接收一组Promise对象,只有当所有的Promise对象都为成功时才会执行then里面的方法
		let p1 = new Promise((resolve,reject)=>{
			setTimeout(()=>{
				console.log(1)
				resolve();
			},1000);
		});
		let p2 = new Promise((resolve,reject)=>{
			setTimeout(()=>{
				console.log(2)
				resolve();
			},2000);
		});
		Promise.all([p1,p2]).then(()=>{
			console.log(3);
		});
	</script>
</body>
</html>